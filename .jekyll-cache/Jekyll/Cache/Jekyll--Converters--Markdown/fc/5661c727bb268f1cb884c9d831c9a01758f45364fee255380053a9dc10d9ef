I"â<h1 id="powertrain-data">Powertrain Data</h1>

<p>The following MATLAB codes define the engine, motor, and battery used in an earlier version of Prius. 
You will only need the engine data code for problem 1. For problem 2, you will need all data for powertrain
components. The entire power management code can be found <a href="\_teaching\mechdesign\ECMS_MEE342.zip">here</a>.
Please be cautious about the units!</p>

<h2 id="engine-data">Engine data</h2>

<p>This function does two things. First, it takes in the engine speed (<code class="language-plaintext highlighter-rouge">Weng</code>, rad/s) and 
engine torque (<code class="language-plaintext highlighter-rouge">Teng</code>, Nm), and outputs the fuel consumption 
(gram per second). Second, it computes the max torque (<code class="language-plaintext highlighter-rouge">Tlimit</code>) for a given engine speed (<code class="language-plaintext highlighter-rouge">Weng</code>).</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="k">function</span> <span class="n">FC</span> <span class="o">=</span> <span class="n">PoP_engine</span><span class="p">(</span><span class="n">Weng</span><span class="p">,</span> <span class="n">Teng</span><span class="p">)</span>
    <span class="n">rps2rpm</span> <span class="o">=</span> <span class="mi">30</span><span class="p">/</span><span class="nb">pi</span><span class="p">;</span>
    <span class="n">deisel_density</span> <span class="o">=</span> <span class="mi">840</span><span class="p">;</span>   <span class="c1">% Diesel fuen density [g/L];</span>
    <span class="n">L2gallon</span> <span class="o">=</span> <span class="mf">0.2642</span><span class="p">;</span>      <span class="c1">% liter-&gt;gallon</span>
    <span class="n">eng_description</span><span class="o">=</span><span class="s1">'Prius_jpn 1.5L (43kW) from FA model and ANL test data'</span><span class="p">;</span>
    <span class="c1">% Engine Parameters</span>
    <span class="n">y1_fc</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.554</span> <span class="mf">0.228</span> <span class="mf">0.138</span> <span class="mf">0.132</span> <span class="mf">0.157</span> <span class="mf">0.19</span> <span class="mf">0.223</span> <span class="mf">0.253</span> <span class="mf">0.281</span> <span class="mf">0.307</span> <span class="mf">0.335</span> <span class="mf">0.365</span> <span class="mf">0.401</span> <span class="mf">0.445</span> <span class="mf">0.499</span> <span class="mf">0.565</span> <span class="mf">0.646</span> <span class="mf">0.742</span> <span class="mf">0.857</span><span class="p">;</span><span class="c1">% zero engine speed</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.654</span> <span class="mf">0.328</span> <span class="mf">0.238</span> <span class="mf">0.232</span> <span class="mf">0.257</span> <span class="mf">0.29</span> <span class="mf">0.323</span> <span class="mf">0.353</span> <span class="mf">0.381</span> <span class="mf">0.407</span> <span class="mf">0.435</span> <span class="mf">0.465</span> <span class="mf">0.501</span> <span class="mf">0.545</span> <span class="mf">0.599</span> <span class="mf">0.665</span> <span class="mf">0.746</span> <span class="mf">0.842</span> <span class="mf">0.957</span><span class="p">;</span><span class="c1">% idle speed</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.667</span> <span class="mf">0.342</span> <span class="mf">0.253</span> <span class="mf">0.249</span> <span class="mf">0.275</span> <span class="mf">0.309</span> <span class="mf">0.343</span> <span class="mf">0.375</span> <span class="mf">0.404</span> <span class="mf">0.432</span> <span class="mf">0.46</span> <span class="mf">0.492</span> <span class="mf">0.53</span> <span class="mf">0.575</span> <span class="mf">0.63</span> <span class="mf">0.697</span> <span class="mf">0.779</span> <span class="mf">0.877</span> <span class="mf">0.993</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.679</span> <span class="mf">0.355</span> <span class="mf">0.268</span> <span class="mf">0.265</span> <span class="mf">0.292</span> <span class="mf">0.327</span> <span class="mf">0.363</span> <span class="mf">0.396</span> <span class="mf">0.426</span> <span class="mf">0.455</span> <span class="mf">0.485</span> <span class="mf">0.518</span> <span class="mf">0.557</span> <span class="mf">0.603</span> <span class="mf">0.659</span> <span class="mf">0.728</span> <span class="mf">0.811</span> <span class="mf">0.91</span> <span class="mf">1.03</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.691</span> <span class="mf">0.368</span> <span class="mf">0.282</span> <span class="mf">0.28</span> <span class="mf">0.308</span> <span class="mf">0.345</span> <span class="mf">0.382</span> <span class="mf">0.416</span> <span class="mf">0.447</span> <span class="mf">0.477</span> <span class="mf">0.509</span> <span class="mf">0.543</span> <span class="mf">0.583</span> <span class="mf">0.63</span> <span class="mf">0.688</span> <span class="mf">0.758</span> <span class="mf">0.842</span> <span class="mf">0.942</span> <span class="mf">1.06</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.701</span> <span class="mf">0.38</span> <span class="mf">0.295</span> <span class="mf">0.294</span> <span class="mf">0.324</span> <span class="mf">0.362</span> <span class="mf">0.4</span> <span class="mf">0.435</span> <span class="mf">0.468</span> <span class="mf">0.499</span> <span class="mf">0.531</span> <span class="mf">0.567</span> <span class="mf">0.608</span> <span class="mf">0.657</span> <span class="mf">0.716</span> <span class="mf">0.787</span> <span class="mf">0.872</span> <span class="mf">0.974</span> <span class="mf">1.09</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.711</span> <span class="mf">0.391</span> <span class="mf">0.307</span> <span class="mf">0.308</span> <span class="mf">0.342</span> <span class="mf">0.38</span> <span class="mf">0.418</span> <span class="mf">0.451</span> <span class="mf">0.483</span> <span class="mf">0.515</span> <span class="mf">0.554</span> <span class="mf">0.59</span> <span class="mf">0.632</span> <span class="mf">0.682</span> <span class="mf">0.742</span> <span class="mf">0.815</span> <span class="mf">0.901</span> <span class="mi">1</span> <span class="mf">1.12</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.721</span> <span class="mf">0.402</span> <span class="mf">0.32</span> <span class="mf">0.321</span> <span class="mf">0.359</span> <span class="mf">0.397</span> <span class="mf">0.436</span> <span class="mf">0.474</span> <span class="mf">0.506</span> <span class="mf">0.538</span> <span class="mf">0.58</span> <span class="mf">0.622</span> <span class="mf">0.656</span> <span class="mf">0.707</span> <span class="mf">0.769</span> <span class="mf">0.842</span> <span class="mf">0.93</span> <span class="mf">1.03</span> <span class="mf">1.16</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.731</span> <span class="mf">0.413</span> <span class="mf">0.331</span> <span class="mf">0.334</span> <span class="mf">0.371</span> <span class="mf">0.413</span> <span class="mf">0.453</span> <span class="mf">0.492</span> <span class="mf">0.528</span> <span class="mf">0.559</span> <span class="mf">0.598</span> <span class="mf">0.649</span> <span class="mf">0.68</span> <span class="mf">0.732</span> <span class="mf">0.794</span> <span class="mf">0.869</span> <span class="mf">0.958</span> <span class="mf">1.06</span> <span class="mf">1.19</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.74</span> <span class="mf">0.423</span> <span class="mf">0.343</span> <span class="mf">0.347</span> <span class="mf">0.383</span> <span class="mf">0.425</span> <span class="mf">0.466</span> <span class="mf">0.508</span> <span class="mf">0.548</span> <span class="mf">0.579</span> <span class="mf">0.617</span> <span class="mf">0.668</span> <span class="mf">0.717</span> <span class="mf">0.756</span> <span class="mf">0.82</span> <span class="mf">0.895</span> <span class="mf">0.985</span> <span class="mf">1.09</span> <span class="mf">1.22</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.749</span> <span class="mf">0.433</span> <span class="mf">0.354</span> <span class="mf">0.359</span> <span class="mf">0.395</span> <span class="mf">0.437</span> <span class="mf">0.478</span> <span class="mf">0.52</span> <span class="mf">0.561</span> <span class="mf">0.597</span> <span class="mf">0.636</span> <span class="mf">0.687</span> <span class="mf">0.738</span> <span class="mf">0.78</span> <span class="mf">0.844</span> <span class="mf">0.921</span> <span class="mf">1.01</span> <span class="mf">1.12</span> <span class="mf">1.25</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.758</span> <span class="mf">0.443</span> <span class="mf">0.366</span> <span class="mf">0.372</span> <span class="mf">0.407</span> <span class="mf">0.448</span> <span class="mf">0.49</span> <span class="mf">0.532</span> <span class="mf">0.577</span> <span class="mf">0.611</span> <span class="mf">0.656</span> <span class="mf">0.708</span> <span class="mf">0.76</span> <span class="mf">0.803</span> <span class="mf">0.869</span> <span class="mf">0.947</span> <span class="mf">1.04</span> <span class="mf">1.15</span> <span class="mf">1.27</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.767</span> <span class="mf">0.453</span> <span class="mf">0.377</span> <span class="mf">0.384</span> <span class="mf">0.419</span> <span class="mf">0.46</span> <span class="mf">0.502</span> <span class="mf">0.546</span> <span class="mf">0.594</span> <span class="mf">0.628</span> <span class="mf">0.676</span> <span class="mf">0.728</span> <span class="mf">0.781</span> <span class="mf">0.832</span> <span class="mf">0.893</span> <span class="mf">0.972</span> <span class="mf">1.07</span> <span class="mf">1.18</span> <span class="mf">1.3</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.776</span> <span class="mf">0.464</span> <span class="mf">0.388</span> <span class="mf">0.396</span> <span class="mf">0.43</span> <span class="mf">0.472</span> <span class="mf">0.516</span> <span class="mf">0.563</span> <span class="mf">0.611</span> <span class="mf">0.648</span> <span class="mf">0.697</span> <span class="mf">0.747</span> <span class="mf">0.8</span> <span class="mf">0.852</span> <span class="mf">0.917</span> <span class="mf">0.997</span> <span class="mf">1.09</span> <span class="mf">1.2</span> <span class="mf">1.33</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.785</span> <span class="mf">0.474</span> <span class="mf">0.399</span> <span class="mf">0.409</span> <span class="mf">0.442</span> <span class="mf">0.485</span> <span class="mf">0.533</span> <span class="mf">0.581</span> <span class="mf">0.628</span> <span class="mf">0.669</span> <span class="mf">0.718</span> <span class="mf">0.767</span> <span class="mf">0.819</span> <span class="mf">0.87</span> <span class="mf">0.941</span> <span class="mf">1.02</span> <span class="mf">1.12</span> <span class="mf">1.23</span> <span class="mf">1.36</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.795</span> <span class="mf">0.484</span> <span class="mf">0.411</span> <span class="mf">0.421</span> <span class="mf">0.455</span> <span class="mf">0.503</span> <span class="mf">0.55</span> <span class="mf">0.598</span> <span class="mf">0.645</span> <span class="mf">0.69</span> <span class="mf">0.738</span> <span class="mf">0.787</span> <span class="mf">0.838</span> <span class="mf">0.89</span> <span class="mf">0.97</span> <span class="mf">1.05</span> <span class="mf">1.14</span> <span class="mf">1.26</span> <span class="mf">1.39</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.804</span> <span class="mf">0.495</span> <span class="mf">0.422</span> <span class="mf">0.424</span> <span class="mf">0.472</span> <span class="mf">0.52</span> <span class="mf">0.567</span> <span class="mf">0.615</span> <span class="mf">0.663</span> <span class="mf">0.712</span> <span class="mf">0.763</span> <span class="mf">0.813</span> <span class="mf">0.864</span> <span class="mf">0.918</span> <span class="mf">0.982</span> <span class="mf">1.07</span> <span class="mf">1.17</span> <span class="mf">1.28</span> <span class="mf">1.41</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.814</span> <span class="mf">0.506</span> <span class="mf">0.434</span> <span class="mf">0.446</span> <span class="mf">0.492</span> <span class="mf">0.54</span> <span class="mf">0.588</span> <span class="mf">0.635</span> <span class="mf">0.684</span> <span class="mf">0.738</span> <span class="mf">0.793</span> <span class="mf">0.847</span> <span class="mf">0.901</span> <span class="mf">0.952</span> <span class="mf">1.02</span> <span class="mf">1.1</span> <span class="mf">1.19</span> <span class="mf">1.31</span> <span class="mf">1.44</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.824</span> <span class="mf">0.517</span> <span class="mf">0.446</span> <span class="mf">0.459</span> <span class="mf">0.523</span> <span class="mf">0.56</span> <span class="mf">0.608</span> <span class="mf">0.655</span> <span class="mf">0.705</span> <span class="mf">0.759</span> <span class="mf">0.813</span> <span class="mf">0.868</span> <span class="mf">0.922</span> <span class="mf">0.978</span> <span class="mf">1.05</span> <span class="mf">1.14</span> <span class="mf">1.22</span> <span class="mf">1.34</span> <span class="mf">1.47</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.834</span> <span class="mf">0.528</span> <span class="mf">0.458</span> <span class="mf">0.473</span> <span class="mf">0.568</span> <span class="mf">0.582</span> <span class="mf">0.628</span> <span class="mf">0.676</span> <span class="mf">0.725</span> <span class="mf">0.78</span> <span class="mf">0.834</span> <span class="mf">0.888</span> <span class="mf">0.945</span> <span class="mi">1</span> <span class="mf">1.07</span> <span class="mf">1.16</span> <span class="mf">1.25</span> <span class="mf">1.36</span> <span class="mf">1.5</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.845</span> <span class="mf">0.54</span> <span class="mf">0.471</span> <span class="mf">0.486</span> <span class="mf">0.532</span> <span class="mf">0.624</span> <span class="mf">0.648</span> <span class="mf">0.696</span> <span class="mf">0.746</span> <span class="mf">0.8</span> <span class="mf">0.855</span> <span class="mf">0.911</span> <span class="mf">0.969</span> <span class="mf">1.03</span> <span class="mf">1.09</span> <span class="mf">1.18</span> <span class="mf">1.27</span> <span class="mf">1.39</span> <span class="mf">1.52</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.856</span> <span class="mf">0.552</span> <span class="mf">0.484</span> <span class="mf">0.5</span> <span class="mf">0.546</span> <span class="mf">0.667</span> <span class="mf">0.682</span> <span class="mf">0.716</span> <span class="mf">0.767</span> <span class="mf">0.821</span> <span class="mf">0.878</span> <span class="mf">0.936</span> <span class="mf">0.994</span> <span class="mf">1.05</span> <span class="mf">1.11</span> <span class="mf">1.2</span> <span class="mf">1.3</span> <span class="mf">1.42</span> <span class="mf">1.55</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.868</span> <span class="mf">0.564</span> <span class="mf">0.497</span> <span class="mf">0.514</span> <span class="mf">0.561</span> <span class="mf">0.721</span> <span class="mf">0.725</span> <span class="mf">0.74</span> <span class="mf">0.787</span> <span class="mf">0.845</span> <span class="mf">0.903</span> <span class="mf">0.961</span> <span class="mf">1.02</span> <span class="mf">1.08</span> <span class="mf">1.13</span> <span class="mf">1.22</span> <span class="mf">1.32</span> <span class="mf">1.44</span> <span class="mf">1.58</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.88</span> <span class="mf">0.577</span> <span class="mf">0.511</span> <span class="mf">0.529</span> <span class="mf">0.577</span> <span class="mf">0.633</span> <span class="mf">0.768</span> <span class="mf">0.783</span> <span class="mf">0.81</span> <span class="mf">0.869</span> <span class="mf">0.927</span> <span class="mf">0.985</span> <span class="mf">1.04</span> <span class="mf">1.1</span> <span class="mf">1.16</span> <span class="mf">1.25</span> <span class="mf">1.35</span> <span class="mf">1.47</span> <span class="mf">1.61</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.892</span> <span class="mf">0.59</span> <span class="mf">0.525</span> <span class="mf">0.544</span> <span class="mf">0.592</span> <span class="mf">0.65</span> <span class="mf">0.81</span> <span class="mf">0.826</span> <span class="mf">0.844</span> <span class="mf">0.89</span> <span class="mf">0.949</span> <span class="mf">1.01</span> <span class="mf">1.07</span> <span class="mf">1.13</span> <span class="mf">1.18</span> <span class="mf">1.27</span> <span class="mf">1.38</span> <span class="mf">1.5</span> <span class="mf">1.64</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.905</span> <span class="mf">0.603</span> <span class="mf">0.539</span> <span class="mf">0.559</span> <span class="mf">0.609</span> <span class="mf">0.667</span> <span class="mf">0.873</span> <span class="mf">0.868</span> <span class="mf">0.884</span> <span class="mf">0.924</span> <span class="mf">0.969</span> <span class="mf">1.03</span> <span class="mf">1.09</span> <span class="mf">1.15</span> <span class="mf">1.21</span> <span class="mf">1.29</span> <span class="mf">1.4</span> <span class="mf">1.52</span> <span class="mf">1.66</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.918</span> <span class="mf">0.618</span> <span class="mf">0.554</span> <span class="mf">0.575</span> <span class="mf">0.625</span> <span class="mf">0.684</span> <span class="mf">0.743</span> <span class="mf">0.911</span> <span class="mf">0.927</span> <span class="mf">0.96</span> <span class="mi">1</span> <span class="mf">1.05</span> <span class="mf">1.11</span> <span class="mf">1.17</span> <span class="mf">1.23</span> <span class="mf">1.31</span> <span class="mf">1.43</span> <span class="mf">1.55</span> <span class="mf">1.69</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.932</span> <span class="mf">0.632</span> <span class="mf">0.569</span> <span class="mf">0.591</span> <span class="mf">0.642</span> <span class="mf">0.702</span> <span class="mf">0.762</span> <span class="mf">0.954</span> <span class="mf">0.969</span> <span class="mf">0.993</span> <span class="mf">1.04</span> <span class="mf">1.08</span> <span class="mf">1.13</span> <span class="mf">1.19</span> <span class="mf">1.26</span> <span class="mf">1.35</span> <span class="mf">1.45</span> <span class="mf">1.58</span> <span class="mf">1.72</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.946</span> <span class="mf">0.647</span> <span class="mf">0.585</span> <span class="mf">0.607</span> <span class="mf">0.66</span> <span class="mf">0.72</span> <span class="mf">0.781</span> <span class="mf">1.02</span> <span class="mf">1.01</span> <span class="mf">1.03</span> <span class="mf">1.08</span> <span class="mf">1.12</span> <span class="mf">1.15</span> <span class="mf">1.21</span> <span class="mf">1.3</span> <span class="mf">1.39</span> <span class="mf">1.47</span> <span class="mf">1.61</span> <span class="mf">1.75</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.961</span> <span class="mf">0.663</span> <span class="mf">0.602</span> <span class="mf">0.625</span> <span class="mf">0.678</span> <span class="mf">0.739</span> <span class="mf">0.8</span> <span class="mf">0.859</span> <span class="mf">1.05</span> <span class="mf">1.07</span> <span class="mf">1.11</span> <span class="mf">1.16</span> <span class="mf">1.19</span> <span class="mf">1.24</span> <span class="mf">1.33</span> <span class="mf">1.42</span> <span class="mf">1.5</span> <span class="mf">1.63</span> <span class="mf">1.78</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.976</span> <span class="mf">0.679</span> <span class="mf">0.619</span> <span class="mf">0.642</span> <span class="mf">0.696</span> <span class="mf">0.758</span> <span class="mf">0.82</span> <span class="mf">0.88</span> <span class="mf">1.1</span> <span class="mf">1.11</span> <span class="mf">1.14</span> <span class="mf">1.19</span> <span class="mf">1.23</span> <span class="mf">1.27</span> <span class="mf">1.35</span> <span class="mf">1.44</span> <span class="mf">1.53</span> <span class="mf">1.66</span> <span class="mf">1.81</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">0.992</span> <span class="mf">0.696</span> <span class="mf">0.636</span> <span class="mf">0.66</span> <span class="mf">0.715</span> <span class="mf">0.778</span> <span class="mf">0.841</span> <span class="mf">0.901</span> <span class="mf">1.18</span> <span class="mf">1.16</span> <span class="mf">1.18</span> <span class="mf">1.23</span> <span class="mf">1.27</span> <span class="mf">1.31</span> <span class="mf">1.37</span> <span class="mf">1.46</span> <span class="mf">1.56</span> <span class="mf">1.69</span> <span class="mf">1.83</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.01</span> <span class="mf">0.713</span> <span class="mf">0.654</span> <span class="mf">0.679</span> <span class="mf">0.734</span> <span class="mf">0.798</span> <span class="mf">0.861</span> <span class="mf">0.923</span> <span class="mf">0.981</span> <span class="mf">1.2</span> <span class="mf">1.21</span> <span class="mf">1.26</span> <span class="mf">1.31</span> <span class="mf">1.35</span> <span class="mf">1.4</span> <span class="mf">1.48</span> <span class="mf">1.59</span> <span class="mf">1.72</span> <span class="mf">1.86</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.03</span> <span class="mf">0.731</span> <span class="mf">0.673</span> <span class="mf">0.698</span> <span class="mf">0.754</span> <span class="mf">0.818</span> <span class="mf">0.883</span> <span class="mf">0.945</span> <span class="mi">1</span> <span class="mf">1.24</span> <span class="mf">1.26</span> <span class="mf">1.29</span> <span class="mf">1.34</span> <span class="mf">1.39</span> <span class="mf">1.43</span> <span class="mf">1.51</span> <span class="mf">1.62</span> <span class="mf">1.75</span> <span class="mf">1.89</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.04</span> <span class="mf">0.749</span> <span class="mf">0.692</span> <span class="mf">0.718</span> <span class="mf">0.775</span> <span class="mf">0.84</span> <span class="mf">0.905</span> <span class="mf">0.967</span> <span class="mf">1.03</span> <span class="mf">1.33</span> <span class="mf">1.3</span> <span class="mf">1.33</span> <span class="mf">1.38</span> <span class="mf">1.42</span> <span class="mf">1.47</span> <span class="mf">1.53</span> <span class="mf">1.65</span> <span class="mf">1.78</span> <span class="mf">1.92</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.06</span> <span class="mf">0.768</span> <span class="mf">0.711</span> <span class="mf">0.738</span> <span class="mf">0.796</span> <span class="mf">0.861</span> <span class="mf">0.927</span> <span class="mf">0.99</span> <span class="mf">1.05</span> <span class="mf">1.11</span> <span class="mf">1.34</span> <span class="mf">1.36</span> <span class="mf">1.41</span> <span class="mf">1.46</span> <span class="mf">1.5</span> <span class="mf">1.56</span> <span class="mf">1.68</span> <span class="mf">1.81</span> <span class="mf">1.95</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.08</span> <span class="mf">0.788</span> <span class="mf">0.732</span> <span class="mf">0.759</span> <span class="mf">0.817</span> <span class="mf">0.883</span> <span class="mf">0.95</span> <span class="mf">1.01</span> <span class="mf">1.07</span> <span class="mf">1.13</span> <span class="mf">1.39</span> <span class="mf">1.4</span> <span class="mf">1.44</span> <span class="mf">1.49</span> <span class="mf">1.54</span> <span class="mf">1.58</span> <span class="mf">1.72</span> <span class="mf">1.84</span> <span class="mf">1.98</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.1</span> <span class="mf">0.808</span> <span class="mf">0.753</span> <span class="mf">0.781</span> <span class="mf">0.839</span> <span class="mf">0.906</span> <span class="mf">0.973</span> <span class="mf">1.04</span> <span class="mf">1.1</span> <span class="mf">1.16</span> <span class="mf">1.48</span> <span class="mf">1.44</span> <span class="mf">1.47</span> <span class="mf">1.52</span> <span class="mf">1.57</span> <span class="mf">1.62</span> <span class="mf">1.75</span> <span class="mf">1.87</span> <span class="mf">2.01</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.12</span> <span class="mf">0.829</span> <span class="mf">0.774</span> <span class="mf">0.803</span> <span class="mf">0.862</span> <span class="mf">0.93</span> <span class="mf">0.997</span> <span class="mf">1.06</span> <span class="mf">1.12</span> <span class="mf">1.19</span> <span class="mf">1.25</span> <span class="mf">1.49</span> <span class="mf">1.51</span> <span class="mf">1.56</span> <span class="mf">1.61</span> <span class="mf">1.65</span> <span class="mf">1.78</span> <span class="mf">1.9</span> <span class="mf">2.05</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.14</span> <span class="mf">0.851</span> <span class="mf">0.796</span> <span class="mf">0.826</span> <span class="mf">0.885</span> <span class="mf">0.953</span> <span class="mf">1.02</span> <span class="mf">1.09</span> <span class="mf">1.15</span> <span class="mf">1.21</span> <span class="mf">1.27</span> <span class="mf">1.54</span> <span class="mf">1.54</span> <span class="mf">1.59</span> <span class="mf">1.64</span> <span class="mf">1.69</span> <span class="mf">1.81</span> <span class="mf">1.93</span> <span class="mf">2.08</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.16</span> <span class="mf">0.873</span> <span class="mf">0.819</span> <span class="mf">0.849</span> <span class="mf">0.909</span> <span class="mf">0.978</span> <span class="mf">1.05</span> <span class="mf">1.11</span> <span class="mf">1.18</span> <span class="mf">1.24</span> <span class="mf">1.3</span> <span class="mf">1.63</span> <span class="mf">1.59</span> <span class="mf">1.62</span> <span class="mf">1.67</span> <span class="mf">1.72</span> <span class="mf">1.84</span> <span class="mf">1.96</span> <span class="mf">2.11</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.19</span> <span class="mf">0.896</span> <span class="mf">0.842</span> <span class="mf">0.873</span> <span class="mf">0.934</span> <span class="mi">1</span> <span class="mf">1.07</span> <span class="mf">1.14</span> <span class="mf">1.2</span> <span class="mf">1.27</span> <span class="mf">1.33</span> <span class="mf">1.73</span> <span class="mf">1.63</span> <span class="mf">1.66</span> <span class="mf">1.7</span> <span class="mf">1.76</span> <span class="mf">1.87</span> <span class="mf">1.99</span> <span class="mf">2.14</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.21</span> <span class="mf">0.919</span> <span class="mf">0.867</span> <span class="mf">0.898</span> <span class="mf">0.959</span> <span class="mf">1.03</span> <span class="mf">1.1</span> <span class="mf">1.17</span> <span class="mf">1.23</span> <span class="mf">1.29</span> <span class="mf">1.36</span> <span class="mf">1.42</span> <span class="mf">1.69</span> <span class="mf">1.69</span> <span class="mf">1.74</span> <span class="mf">1.79</span> <span class="mf">1.91</span> <span class="mf">2.02</span> <span class="mf">2.17</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.23</span> <span class="mf">0.944</span> <span class="mf">0.891</span> <span class="mf">0.923</span> <span class="mf">0.985</span> <span class="mf">1.05</span> <span class="mf">1.13</span> <span class="mf">1.19</span> <span class="mf">1.26</span> <span class="mf">1.32</span> <span class="mf">1.39</span> <span class="mf">1.45</span> <span class="mf">1.79</span> <span class="mf">1.73</span> <span class="mf">1.77</span> <span class="mf">1.82</span> <span class="mf">1.93</span> <span class="mf">2.07</span> <span class="mf">2.21</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.26</span> <span class="mf">0.969</span> <span class="mf">0.917</span> <span class="mf">0.949</span> <span class="mf">1.01</span> <span class="mf">1.08</span> <span class="mf">1.15</span> <span class="mf">1.22</span> <span class="mf">1.29</span> <span class="mf">1.35</span> <span class="mf">1.42</span> <span class="mf">1.48</span> <span class="mf">1.88</span> <span class="mf">1.77</span> <span class="mf">1.81</span> <span class="mf">1.85</span> <span class="mf">1.96</span> <span class="mf">2.1</span> <span class="mf">2.24</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.28</span> <span class="mf">0.994</span> <span class="mf">0.943</span> <span class="mf">0.976</span> <span class="mf">1.04</span> <span class="mf">1.11</span> <span class="mf">1.18</span> <span class="mf">1.25</span> <span class="mf">1.32</span> <span class="mf">1.38</span> <span class="mf">1.45</span> <span class="mf">1.51</span> <span class="mf">1.59</span> <span class="mf">1.84</span> <span class="mf">1.84</span> <span class="mf">1.89</span> <span class="mf">1.99</span> <span class="mf">2.13</span> <span class="mf">2.27</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.31</span> <span class="mf">1.02</span> <span class="mf">0.97</span> <span class="mi">1</span> <span class="mf">1.07</span> <span class="mf">1.14</span> <span class="mf">1.21</span> <span class="mf">1.28</span> <span class="mf">1.34</span> <span class="mf">1.41</span> <span class="mf">1.48</span> <span class="mf">1.55</span> <span class="mf">1.62</span> <span class="mf">1.94</span> <span class="mf">1.87</span> <span class="mf">1.92</span> <span class="mf">2.02</span> <span class="mf">2.17</span> <span class="mf">2.31</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.34</span> <span class="mf">1.05</span> <span class="mf">0.997</span> <span class="mf">1.03</span> <span class="mf">1.09</span> <span class="mf">1.17</span> <span class="mf">1.24</span> <span class="mf">1.31</span> <span class="mf">1.37</span> <span class="mf">1.44</span> <span class="mf">1.51</span> <span class="mf">1.58</span> <span class="mf">1.65</span> <span class="mf">2.03</span> <span class="mf">1.92</span> <span class="mf">1.96</span> <span class="mf">2.05</span> <span class="mf">2.2</span> <span class="mf">2.34</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.36</span> <span class="mf">1.08</span> <span class="mf">1.03</span> <span class="mf">1.06</span> <span class="mf">1.12</span> <span class="mf">1.2</span> <span class="mf">1.27</span> <span class="mf">1.34</span> <span class="mf">1.41</span> <span class="mf">1.47</span> <span class="mf">1.54</span> <span class="mf">1.61</span> <span class="mf">1.68</span> <span class="mf">1.77</span> <span class="mi">2</span> <span class="mf">1.99</span> <span class="mf">2.09</span> <span class="mf">2.23</span> <span class="mf">2.38</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.39</span> <span class="mf">1.1</span> <span class="mf">1.05</span> <span class="mf">1.09</span> <span class="mf">1.15</span> <span class="mf">1.23</span> <span class="mf">1.3</span> <span class="mf">1.37</span> <span class="mf">1.44</span> <span class="mf">1.5</span> <span class="mf">1.57</span> <span class="mf">1.64</span> <span class="mf">1.72</span> <span class="mf">1.8</span> <span class="mf">2.09</span> <span class="mf">2.02</span> <span class="mf">2.13</span> <span class="mf">2.26</span> <span class="mf">2.41</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.42</span> <span class="mf">1.13</span> <span class="mf">1.08</span> <span class="mf">1.12</span> <span class="mf">1.18</span> <span class="mf">1.26</span> <span class="mf">1.33</span> <span class="mf">1.4</span> <span class="mf">1.47</span> <span class="mf">1.54</span> <span class="mf">1.6</span> <span class="mf">1.67</span> <span class="mf">1.75</span> <span class="mf">1.83</span> <span class="mf">2.19</span> <span class="mf">2.06</span> <span class="mf">2.16</span> <span class="mf">2.3</span> <span class="mf">2.45</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.45</span> <span class="mf">1.16</span> <span class="mf">1.11</span> <span class="mf">1.15</span> <span class="mf">1.21</span> <span class="mf">1.29</span> <span class="mf">1.36</span> <span class="mf">1.43</span> <span class="mf">1.5</span> <span class="mf">1.57</span> <span class="mf">1.64</span> <span class="mf">1.71</span> <span class="mf">1.78</span> <span class="mf">1.87</span> <span class="mf">1.96</span> <span class="mf">2.15</span> <span class="mf">2.2</span> <span class="mf">2.34</span> <span class="mf">2.48</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.48</span> <span class="mf">1.19</span> <span class="mf">1.15</span> <span class="mf">1.18</span> <span class="mf">1.25</span> <span class="mf">1.32</span> <span class="mf">1.39</span> <span class="mf">1.47</span> <span class="mf">1.53</span> <span class="mf">1.6</span> <span class="mf">1.67</span> <span class="mf">1.74</span> <span class="mf">1.82</span> <span class="mf">1.9</span> <span class="mi">2</span> <span class="mf">2.24</span> <span class="mf">2.24</span> <span class="mf">2.37</span> <span class="mf">2.52</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.51</span> <span class="mf">1.23</span> <span class="mf">1.18</span> <span class="mf">1.21</span> <span class="mf">1.28</span> <span class="mf">1.35</span> <span class="mf">1.43</span> <span class="mf">1.5</span> <span class="mf">1.57</span> <span class="mf">1.64</span> <span class="mf">1.7</span> <span class="mf">1.78</span> <span class="mf">1.85</span> <span class="mf">1.94</span> <span class="mf">2.03</span> <span class="mf">2.34</span> <span class="mf">2.27</span> <span class="mf">2.41</span> <span class="mf">2.56</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.54</span> <span class="mf">1.26</span> <span class="mf">1.21</span> <span class="mf">1.25</span> <span class="mf">1.31</span> <span class="mf">1.39</span> <span class="mf">1.46</span> <span class="mf">1.53</span> <span class="mf">1.6</span> <span class="mf">1.67</span> <span class="mf">1.74</span> <span class="mf">1.81</span> <span class="mf">1.89</span> <span class="mf">1.97</span> <span class="mf">2.07</span> <span class="mf">2.18</span> <span class="mf">2.31</span> <span class="mf">2.45</span> <span class="mf">2.59</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.58</span> <span class="mf">1.29</span> <span class="mf">1.24</span> <span class="mf">1.28</span> <span class="mf">1.35</span> <span class="mf">1.42</span> <span class="mf">1.5</span> <span class="mf">1.57</span> <span class="mf">1.64</span> <span class="mf">1.71</span> <span class="mf">1.77</span> <span class="mf">1.85</span> <span class="mf">1.92</span> <span class="mf">2.01</span> <span class="mf">2.11</span> <span class="mf">2.21</span> <span class="mf">2.39</span> <span class="mf">2.49</span> <span class="mf">2.63</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.61</span> <span class="mf">1.32</span> <span class="mf">1.28</span> <span class="mf">1.31</span> <span class="mf">1.38</span> <span class="mf">1.45</span> <span class="mf">1.53</span> <span class="mf">1.6</span> <span class="mf">1.67</span> <span class="mf">1.74</span> <span class="mf">1.81</span> <span class="mf">1.88</span> <span class="mf">1.96</span> <span class="mf">2.05</span> <span class="mf">2.14</span> <span class="mf">2.25</span> <span class="mf">2.49</span> <span class="mf">2.52</span> <span class="mf">2.67</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.64</span> <span class="mf">1.36</span> <span class="mf">1.31</span> <span class="mf">1.35</span> <span class="mf">1.42</span> <span class="mf">1.49</span> <span class="mf">1.57</span> <span class="mf">1.64</span> <span class="mf">1.71</span> <span class="mf">1.78</span> <span class="mf">1.85</span> <span class="mf">1.92</span> <span class="mi">2</span> <span class="mf">2.09</span> <span class="mf">2.18</span> <span class="mf">2.29</span> <span class="mf">2.41</span> <span class="mf">2.56</span> <span class="mf">2.71</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.68</span> <span class="mf">1.39</span> <span class="mf">1.35</span> <span class="mf">1.38</span> <span class="mf">1.45</span> <span class="mf">1.53</span> <span class="mf">1.6</span> <span class="mf">1.68</span> <span class="mf">1.75</span> <span class="mf">1.81</span> <span class="mf">1.88</span> <span class="mf">1.96</span> <span class="mf">2.04</span> <span class="mf">2.12</span> <span class="mf">2.22</span> <span class="mf">2.33</span> <span class="mf">2.45</span> <span class="mf">2.6</span> <span class="mf">2.75</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.71</span> <span class="mf">1.43</span> <span class="mf">1.38</span> <span class="mf">1.42</span> <span class="mf">1.49</span> <span class="mf">1.56</span> <span class="mf">1.64</span> <span class="mf">1.71</span> <span class="mf">1.78</span> <span class="mf">1.85</span> <span class="mf">1.92</span> <span class="mi">2</span> <span class="mf">2.07</span> <span class="mf">2.16</span> <span class="mf">2.26</span> <span class="mf">2.37</span> <span class="mf">2.49</span> <span class="mf">2.64</span> <span class="mf">2.79</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.75</span> <span class="mf">1.47</span> <span class="mf">1.42</span> <span class="mf">1.46</span> <span class="mf">1.53</span> <span class="mf">1.6</span> <span class="mf">1.68</span> <span class="mf">1.75</span> <span class="mf">1.82</span> <span class="mf">1.89</span> <span class="mf">1.96</span> <span class="mf">2.03</span> <span class="mf">2.11</span> <span class="mf">2.2</span> <span class="mf">2.3</span> <span class="mf">2.41</span> <span class="mf">2.53</span> <span class="mf">2.67</span> <span class="mf">2.83</span><span class="p">;</span>
             <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.79</span> <span class="mf">1.5</span> <span class="mf">1.46</span> <span class="mf">1.5</span> <span class="mf">1.56</span> <span class="mf">1.64</span> <span class="mf">1.72</span> <span class="mf">1.79</span> <span class="mf">1.86</span> <span class="mf">1.93</span> <span class="mi">2</span> <span class="mf">2.07</span> <span class="mf">2.15</span> <span class="mf">2.24</span> <span class="mf">2.34</span> <span class="mf">2.45</span> <span class="mf">2.57</span> <span class="mf">2.71</span> <span class="mf">2.87</span><span class="p">];</span> <span class="c1">%Fuel consumption map [g/s]</span>
     
    <span class="n">x1_w</span> <span class="o">=</span><span class="p">[</span><span class="mi">0</span> <span class="mf">104.7</span> <span class="mi">110</span> <span class="mf">115.2</span> <span class="mf">120.4</span> <span class="mf">125.7</span> <span class="mf">130.9</span> <span class="mf">136.1</span> <span class="mf">141.4</span> <span class="k">...</span>
           <span class="mf">146.6</span> <span class="mf">151.8</span> <span class="mf">157.1</span> <span class="mf">162.3</span> <span class="mf">167.6</span> <span class="mf">172.8</span> <span class="mi">178</span> <span class="mf">183.3</span> <span class="mf">188.5</span> <span class="mf">193.7</span> <span class="mi">199</span> <span class="k">...</span>
           <span class="mf">204.2</span> <span class="mf">209.4</span> <span class="mf">214.7</span> <span class="mf">219.9</span> <span class="mf">225.1</span> <span class="mf">230.4</span> <span class="mf">235.6</span> <span class="mf">240.9</span> <span class="mf">246.1</span> <span class="mf">251.3</span> <span class="mf">256.6</span> <span class="k">...</span>
           <span class="mf">261.8</span> <span class="mi">267</span> <span class="mf">272.3</span> <span class="mf">277.5</span> <span class="mf">282.7</span> <span class="mi">288</span> <span class="mf">293.2</span> <span class="mf">298.5</span> <span class="mf">303.7</span> <span class="mf">308.9</span> <span class="mf">314.2</span> <span class="k">...</span>
           <span class="mf">319.4</span> <span class="mf">324.6</span> <span class="mf">329.9</span> <span class="mf">335.1</span> <span class="mf">340.3</span> <span class="mf">345.6</span> <span class="mf">350.8</span> <span class="mi">356</span> <span class="mf">361.3</span> <span class="mf">366.5</span> <span class="mf">371.8</span> <span class="k">...</span>
           <span class="mi">377</span> <span class="mf">382.2</span> <span class="mf">387.5</span> <span class="mf">392.7</span> <span class="mf">397.9</span> <span class="mf">403.2</span> <span class="mf">408.4</span> <span class="mf">413.6</span> <span class="mf">418.9</span><span class="p">];</span>                    <span class="c1">% Speed values for the FC map [rad/s]</span>
    <span class="n">x1_t</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">6</span> <span class="mi">0</span> <span class="mi">10</span> <span class="mi">15</span> <span class="mi">20</span> <span class="mi">25</span> <span class="mi">30</span> <span class="mi">35</span> <span class="mi">40</span> <span class="mi">45</span> <span class="mi">50</span> <span class="mi">55</span> <span class="mi">60</span> <span class="mi">65</span> <span class="mi">70</span> <span class="mi">75</span> <span class="mi">80</span> <span class="mi">85</span> <span class="mi">90</span> <span class="mi">95</span> <span class="mi">100</span><span class="p">];</span>        <span class="c1">% Torque values for the FC map</span>
    <span class="n">y2_tlimit</span> <span class="o">=</span> <span class="p">[</span><span class="mi">75</span> <span class="mf">77.33</span> <span class="mf">78.2</span> <span class="mf">79.07</span> <span class="mf">79.94</span> <span class="mf">80.81</span> <span class="mf">81.68</span> <span class="mf">82.35</span> <span class="mf">82.85</span> <span class="mf">83.35</span> <span class="mf">83.85</span> <span class="k">...</span>
                <span class="mf">84.35</span> <span class="mf">84.83</span> <span class="mf">85.2</span> <span class="mf">85.58</span> <span class="mf">85.95</span> <span class="mf">86.32</span> <span class="mf">86.7</span> <span class="mf">87.13</span> <span class="mf">87.6</span> <span class="mf">88.08</span> <span class="mf">88.55</span> <span class="k">...</span>
                <span class="mf">89.02</span> <span class="mf">89.47</span> <span class="mf">89.79</span> <span class="mf">90.11</span> <span class="mf">90.43</span> <span class="mf">90.76</span> <span class="mf">91.08</span> <span class="mf">91.4</span> <span class="mf">91.73</span> <span class="mf">92.05</span> <span class="mf">92.38</span> <span class="k">...</span>
                <span class="mf">92.7</span> <span class="mf">93.03</span> <span class="mf">93.35</span> <span class="mf">93.67</span> <span class="mf">93.99</span> <span class="mf">94.32</span> <span class="mf">94.64</span> <span class="mf">94.96</span> <span class="mf">95.29</span> <span class="mf">95.61</span> <span class="mf">95.93</span> <span class="k">...</span>
                <span class="mf">96.26</span> <span class="mf">96.58</span> <span class="mf">96.9</span> <span class="mf">97.22</span> <span class="mf">97.55</span> <span class="mf">97.87</span> <span class="mf">98.19</span> <span class="mf">98.52</span> <span class="mf">98.84</span> <span class="mf">99.17</span> <span class="mf">99.49</span> <span class="k">...</span>
                <span class="mf">99.81</span> <span class="mf">100.2</span> <span class="mf">100.5</span> <span class="mf">100.9</span> <span class="mf">101.3</span> <span class="mf">101.7</span> <span class="mi">102</span><span class="p">];</span>                           <span class="c1">% Engine torque limit map [Nm] </span>
    <span class="n">x2_w</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="mf">104.7</span> <span class="mi">110</span> <span class="mf">115.2</span> <span class="mf">120.4</span> <span class="mf">125.7</span> <span class="mf">130.9</span> <span class="mf">136.1</span> <span class="mf">141.4</span> <span class="k">...</span>
                <span class="mf">146.6</span> <span class="mf">151.8</span> <span class="mf">157.1</span> <span class="mf">162.3</span> <span class="mf">167.6</span> <span class="mf">172.8</span> <span class="mi">178</span> <span class="mf">183.3</span> <span class="mf">188.5</span> <span class="mf">193.7</span> <span class="mi">199</span> <span class="k">...</span>
                <span class="mf">204.2</span> <span class="mf">209.4</span> <span class="mf">214.7</span> <span class="mf">219.9</span> <span class="mf">225.1</span> <span class="mf">230.4</span> <span class="mf">235.6</span> <span class="mf">240.9</span> <span class="mf">246.1</span> <span class="mf">251.3</span> <span class="mf">256.6</span> <span class="k">...</span>
                <span class="mf">261.8</span> <span class="mi">267</span> <span class="mf">272.3</span> <span class="mf">277.5</span> <span class="mf">282.7</span> <span class="mi">288</span> <span class="mf">293.2</span> <span class="mf">298.5</span> <span class="mf">303.7</span> <span class="mf">308.9</span> <span class="mf">314.2</span> <span class="k">...</span>
                <span class="mf">319.4</span> <span class="mf">324.6</span> <span class="mf">329.9</span> <span class="mf">335.1</span> <span class="mf">340.3</span> <span class="mf">345.6</span> <span class="mf">350.8</span> <span class="mi">356</span> <span class="mf">361.3</span> <span class="mf">366.5</span> <span class="mf">371.8</span> <span class="k">...</span>
                <span class="mi">377</span> <span class="mf">382.2</span> <span class="mf">387.5</span> <span class="mf">392.7</span> <span class="mf">397.9</span> <span class="mf">403.2</span> <span class="mf">408.4</span> <span class="mf">413.6</span> <span class="mf">418.9</span><span class="p">];</span>               <span class="c1">% Speed values for the torque limit map [rad/s]</span>

    <span class="c1">% Internal variables</span>
    <span class="n">Tlimit</span> <span class="o">=</span> <span class="nb">interp1</span><span class="p">(</span><span class="n">x2_w</span><span class="p">,</span> <span class="n">y2_tlimit</span><span class="p">,</span> <span class="n">Weng</span><span class="p">/</span><span class="n">rps2rpm</span><span class="p">);</span>                               <span class="c1">% Torque limit [Nm]</span>

    <span class="n">feas</span> <span class="o">=</span> <span class="p">(</span><span class="n">Teng</span><span class="o">&lt;=</span><span class="n">Tlimit</span><span class="p">);</span>
    <span class="n">FC</span> <span class="o">=</span> <span class="nb">interp2</span><span class="p">(</span><span class="n">x1_t</span><span class="p">,</span> <span class="n">x1_w</span><span class="p">,</span> <span class="n">y1_fc</span><span class="p">,</span> <span class="n">Teng</span><span class="p">,</span> <span class="n">Weng</span><span class="p">/</span><span class="n">rps2rpm</span><span class="p">);</span>                     <span class="c1">% Fuel consumption [g/s]</span>
    <span class="n">FC</span><span class="p">(</span><span class="n">FC</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">)</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span> 
    <span class="n">FC</span><span class="p">(</span><span class="o">~</span><span class="n">feas</span><span class="p">)</span> <span class="o">=</span> <span class="nb">NaN</span><span class="p">;</span>
<span class="k">end</span></code></pre></figure>

<h2 id="motor-data">Motor data</h2>

<p>The following code takes in the motor torque, speed, and voltage and outputs the current.</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="k">function</span> <span class="p">[</span><span class="n">Imotor</span><span class="p">]</span> <span class="o">=</span> <span class="n">PoP_motor</span><span class="p">(</span><span class="n">Tmotor</span><span class="p">,</span> <span class="n">Wmotor</span><span class="p">,</span> <span class="n">Vmotor</span><span class="p">)</span>
<span class="n">rps2rpm</span> <span class="o">=</span> <span class="mi">30</span><span class="p">/</span><span class="nb">pi</span><span class="p">;</span>
<span class="n">Jmotor</span> <span class="o">=</span> <span class="mf">0.0226</span><span class="p">;</span>
<span class="n">Mmotor</span> <span class="o">=</span> <span class="mf">56.75</span><span class="p">;</span>
<span class="n">Mgen</span> <span class="o">=</span> <span class="mf">32.70</span><span class="p">;</span>
<span class="n">motor_description</span><span class="o">=</span><span class="s1">'PRIUS_JPN 50-kW permanent magnet motor/controller'</span><span class="p">;</span>
<span class="n">motor_eff</span> <span class="o">=</span> <span class="mf">0.95</span><span class="o">*</span><span class="p">[</span><span class="k">...</span>
    <span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">,</span><span class="mf">0.2000</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.4600</span><span class="p">,</span><span class="mf">0.5400</span><span class="p">,</span><span class="mf">0.5800</span><span class="p">,</span><span class="mf">0.6000</span><span class="p">,</span><span class="mf">0.6000</span><span class="p">,</span><span class="mf">0.6000</span><span class="p">,</span><span class="mf">0.6100</span><span class="p">,</span><span class="mf">0.6350</span><span class="p">,</span><span class="mf">0.6500</span><span class="p">,</span><span class="mf">0.6600</span><span class="p">,</span><span class="mf">0.6800</span><span class="p">,</span><span class="mf">0.6950</span><span class="p">,</span><span class="mf">0.7000</span><span class="p">,</span><span class="mf">0.7100</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.7100</span><span class="p">,</span><span class="mf">0.6800</span><span class="p">,</span><span class="mf">0.6000</span><span class="p">,</span><span class="mf">0.4000</span><span class="p">,</span><span class="mf">0.6000</span><span class="p">,</span><span class="mf">0.6800</span><span class="p">,</span><span class="mf">0.7100</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.7100</span><span class="p">,</span><span class="mf">0.7000</span><span class="p">,</span><span class="mf">0.6950</span><span class="p">,</span><span class="mf">0.6800</span><span class="p">,</span><span class="mf">0.6600</span><span class="p">,</span><span class="mf">0.6500</span><span class="p">,</span><span class="mf">0.6350</span><span class="p">,</span><span class="mf">0.6100</span><span class="p">,</span><span class="mf">0.6000</span><span class="p">,</span><span class="mf">0.6000</span><span class="p">,</span><span class="mf">0.6000</span><span class="p">,</span><span class="mf">0.5800</span><span class="p">,</span><span class="mf">0.5400</span><span class="p">,</span><span class="mf">0.4600</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.6500</span><span class="p">,</span><span class="mf">0.6600</span><span class="p">,</span><span class="mf">0.7000</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.7420</span><span class="p">,</span><span class="mf">0.7500</span><span class="p">,</span><span class="mf">0.7650</span><span class="p">,</span><span class="mf">0.7800</span><span class="p">,</span><span class="mf">0.7860</span><span class="p">,</span><span class="mf">0.8000</span><span class="p">,</span><span class="mf">0.8040</span><span class="p">,</span><span class="mf">0.8200</span><span class="p">,</span><span class="mf">0.8250</span><span class="p">,</span><span class="mf">0.8270</span><span class="p">,</span><span class="mf">0.8270</span><span class="p">,</span><span class="mf">0.8250</span><span class="p">,</span><span class="mf">0.8220</span><span class="p">,</span><span class="mf">0.8150</span><span class="p">,</span><span class="mf">0.7850</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.5000</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.7850</span><span class="p">,</span><span class="mf">0.8150</span><span class="p">,</span><span class="mf">0.8220</span><span class="p">,</span><span class="mf">0.8250</span><span class="p">,</span><span class="mf">0.8270</span><span class="p">,</span><span class="mf">0.8270</span><span class="p">,</span><span class="mf">0.8250</span><span class="p">,</span><span class="mf">0.8200</span><span class="p">,</span><span class="mf">0.8040</span><span class="p">,</span><span class="mf">0.8000</span><span class="p">,</span><span class="mf">0.7860</span><span class="p">,</span><span class="mf">0.7800</span><span class="p">,</span><span class="mf">0.7650</span><span class="p">,</span><span class="mf">0.7500</span><span class="p">,</span><span class="mf">0.7420</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.7000</span><span class="p">,</span><span class="mf">0.6600</span><span class="p">,</span><span class="mf">0.6500</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.7350</span><span class="p">,</span><span class="mf">0.7400</span><span class="p">,</span><span class="mf">0.7690</span><span class="p">,</span><span class="mf">0.7800</span><span class="p">,</span><span class="mf">0.7980</span><span class="p">,</span><span class="mf">0.8090</span><span class="p">,</span><span class="mf">0.8210</span><span class="p">,</span><span class="mf">0.8270</span><span class="p">,</span><span class="mf">0.8400</span><span class="p">,</span><span class="mf">0.8430</span><span class="p">,</span><span class="mf">0.8500</span><span class="p">,</span><span class="mf">0.8550</span><span class="p">,</span><span class="mf">0.8540</span><span class="p">,</span><span class="mf">0.8630</span><span class="p">,</span><span class="mf">0.8650</span><span class="p">,</span><span class="mf">0.8640</span><span class="p">,</span><span class="mf">0.8580</span><span class="p">,</span><span class="mf">0.8480</span><span class="p">,</span><span class="mf">0.8200</span><span class="p">,</span><span class="mf">0.7680</span><span class="p">,</span><span class="mf">0.5300</span><span class="p">,</span><span class="mf">0.7680</span><span class="p">,</span><span class="mf">0.8200</span><span class="p">,</span><span class="mf">0.8480</span><span class="p">,</span><span class="mf">0.8580</span><span class="p">,</span><span class="mf">0.8640</span><span class="p">,</span><span class="mf">0.8650</span><span class="p">,</span><span class="mf">0.8630</span><span class="p">,</span><span class="mf">0.8540</span><span class="p">,</span><span class="mf">0.8550</span><span class="p">,</span><span class="mf">0.8500</span><span class="p">,</span><span class="mf">0.8430</span><span class="p">,</span><span class="mf">0.8400</span><span class="p">,</span><span class="mf">0.8270</span><span class="p">,</span><span class="mf">0.8210</span><span class="p">,</span><span class="mf">0.8090</span><span class="p">,</span><span class="mf">0.7980</span><span class="p">,</span><span class="mf">0.7800</span><span class="p">,</span><span class="mf">0.7690</span><span class="p">,</span><span class="mf">0.7400</span><span class="p">,</span><span class="mf">0.7350</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.7940</span><span class="p">,</span><span class="mf">0.7940</span><span class="p">,</span><span class="mf">0.8110</span><span class="p">,</span><span class="mf">0.8200</span><span class="p">,</span><span class="mf">0.8400</span><span class="p">,</span><span class="mf">0.8500</span><span class="p">,</span><span class="mf">0.8690</span><span class="p">,</span><span class="mf">0.8670</span><span class="p">,</span><span class="mf">0.8770</span><span class="p">,</span><span class="mf">0.8780</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.8830</span><span class="p">,</span><span class="mf">0.8810</span><span class="p">,</span><span class="mf">0.8870</span><span class="p">,</span><span class="mf">0.8880</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.8720</span><span class="p">,</span><span class="mf">0.8590</span><span class="p">,</span><span class="mf">0.8000</span><span class="p">,</span><span class="mf">0.6200</span><span class="p">,</span><span class="mf">0.8000</span><span class="p">,</span><span class="mf">0.8590</span><span class="p">,</span><span class="mf">0.8720</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8880</span><span class="p">,</span><span class="mf">0.8870</span><span class="p">,</span><span class="mf">0.8810</span><span class="p">,</span><span class="mf">0.8830</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.8780</span><span class="p">,</span><span class="mf">0.8770</span><span class="p">,</span><span class="mf">0.8670</span><span class="p">,</span><span class="mf">0.8690</span><span class="p">,</span><span class="mf">0.8500</span><span class="p">,</span><span class="mf">0.8400</span><span class="p">,</span><span class="mf">0.8200</span><span class="p">,</span><span class="mf">0.8110</span><span class="p">,</span><span class="mf">0.7940</span><span class="p">,</span><span class="mf">0.7940</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.8460</span><span class="p">,</span><span class="mf">0.8460</span><span class="p">,</span><span class="mf">0.8500</span><span class="p">,</span><span class="mf">0.8560</span><span class="p">,</span><span class="mf">0.8680</span><span class="p">,</span><span class="mf">0.8760</span><span class="p">,</span><span class="mf">0.8830</span><span class="p">,</span><span class="mf">0.8880</span><span class="p">,</span><span class="mf">0.8940</span><span class="p">,</span><span class="mf">0.8970</span><span class="p">,</span><span class="mf">0.9010</span><span class="p">,</span><span class="mf">0.9040</span><span class="p">,</span><span class="mf">0.9020</span><span class="p">,</span><span class="mf">0.9070</span><span class="p">,</span><span class="mf">0.9060</span><span class="p">,</span><span class="mf">0.9040</span><span class="p">,</span><span class="mf">0.8960</span><span class="p">,</span><span class="mf">0.8830</span><span class="p">,</span><span class="mf">0.8610</span><span class="p">,</span><span class="mf">0.8100</span><span class="p">,</span><span class="mf">0.6400</span><span class="p">,</span><span class="mf">0.8100</span><span class="p">,</span><span class="mf">0.8610</span><span class="p">,</span><span class="mf">0.8830</span><span class="p">,</span><span class="mf">0.8960</span><span class="p">,</span><span class="mf">0.9040</span><span class="p">,</span><span class="mf">0.9060</span><span class="p">,</span><span class="mf">0.9070</span><span class="p">,</span><span class="mf">0.9020</span><span class="p">,</span><span class="mf">0.9040</span><span class="p">,</span><span class="mf">0.9010</span><span class="p">,</span><span class="mf">0.8970</span><span class="p">,</span><span class="mf">0.8940</span><span class="p">,</span><span class="mf">0.8880</span><span class="p">,</span><span class="mf">0.8830</span><span class="p">,</span><span class="mf">0.8760</span><span class="p">,</span><span class="mf">0.8680</span><span class="p">,</span><span class="mf">0.8560</span><span class="p">,</span><span class="mf">0.8500</span><span class="p">,</span><span class="mf">0.8460</span><span class="p">,</span><span class="mf">0.8460</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8920</span><span class="p">,</span><span class="mf">0.8970</span><span class="p">,</span><span class="mf">0.9010</span><span class="p">,</span><span class="mf">0.9070</span><span class="p">,</span><span class="mf">0.9080</span><span class="p">,</span><span class="mf">0.9140</span><span class="p">,</span><span class="mf">0.9170</span><span class="p">,</span><span class="mf">0.9200</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.9180</span><span class="p">,</span><span class="mf">0.9150</span><span class="p">,</span><span class="mf">0.9080</span><span class="p">,</span><span class="mf">0.8970</span><span class="p">,</span><span class="mf">0.8720</span><span class="p">,</span><span class="mf">0.8220</span><span class="p">,</span><span class="mf">0.7000</span><span class="p">,</span><span class="mf">0.8220</span><span class="p">,</span><span class="mf">0.8720</span><span class="p">,</span><span class="mf">0.8970</span><span class="p">,</span><span class="mf">0.9080</span><span class="p">,</span><span class="mf">0.9150</span><span class="p">,</span><span class="mf">0.9180</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9200</span><span class="p">,</span><span class="mf">0.9170</span><span class="p">,</span><span class="mf">0.9140</span><span class="p">,</span><span class="mf">0.9080</span><span class="p">,</span><span class="mf">0.9070</span><span class="p">,</span><span class="mf">0.9010</span><span class="p">,</span><span class="mf">0.8970</span><span class="p">,</span><span class="mf">0.8920</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9120</span><span class="p">,</span><span class="mf">0.9170</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9310</span><span class="p">,</span><span class="mf">0.9310</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9240</span><span class="p">,</span><span class="mf">0.9160</span><span class="p">,</span><span class="mf">0.9050</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.8400</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.8400</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.9050</span><span class="p">,</span><span class="mf">0.9160</span><span class="p">,</span><span class="mf">0.9240</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9310</span><span class="p">,</span><span class="mf">0.9310</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.9170</span><span class="p">,</span><span class="mf">0.9120</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">,</span><span class="mf">0.9130</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9320</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9360</span><span class="p">,</span><span class="mf">0.9320</span><span class="p">,</span><span class="mf">0.9250</span><span class="p">,</span><span class="mf">0.9120</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.8420</span><span class="p">,</span><span class="mf">0.7500</span><span class="p">,</span><span class="mf">0.8420</span><span class="p">,</span><span class="mf">0.8860</span><span class="p">,</span><span class="mf">0.9120</span><span class="p">,</span><span class="mf">0.9250</span><span class="p">,</span><span class="mf">0.9320</span><span class="p">,</span><span class="mf">0.9360</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9320</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9410</span><span class="p">,</span><span class="mf">0.9440</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9470</span><span class="p">,</span><span class="mf">0.9480</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9360</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.9000</span><span class="p">,</span><span class="mf">0.8590</span><span class="p">,</span><span class="mf">0.6800</span><span class="p">,</span><span class="mf">0.8590</span><span class="p">,</span><span class="mf">0.9000</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.9360</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9480</span><span class="p">,</span><span class="mf">0.9470</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9440</span><span class="p">,</span><span class="mf">0.9410</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9480</span><span class="p">,</span><span class="mf">0.9510</span><span class="p">,</span><span class="mf">0.9520</span><span class="p">,</span><span class="mf">0.9510</span><span class="p">,</span><span class="mf">0.9500</span><span class="p">,</span><span class="mf">0.9470</span><span class="p">,</span><span class="mf">0.9310</span><span class="p">,</span><span class="mf">0.9090</span><span class="p">,</span><span class="mf">0.8520</span><span class="p">,</span><span class="mf">0.5800</span><span class="p">,</span><span class="mf">0.8520</span><span class="p">,</span><span class="mf">0.9090</span><span class="p">,</span><span class="mf">0.9310</span><span class="p">,</span><span class="mf">0.9470</span><span class="p">,</span><span class="mf">0.9500</span><span class="p">,</span><span class="mf">0.9510</span><span class="p">,</span><span class="mf">0.9520</span><span class="p">,</span><span class="mf">0.9510</span><span class="p">,</span><span class="mf">0.9480</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9510</span><span class="p">,</span><span class="mf">0.9520</span><span class="p">,</span><span class="mf">0.9480</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9100</span><span class="p">,</span><span class="mf">0.8600</span><span class="p">,</span><span class="mf">0.5700</span><span class="p">,</span><span class="mf">0.8600</span><span class="p">,</span><span class="mf">0.9100</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9480</span><span class="p">,</span><span class="mf">0.9520</span><span class="p">,</span><span class="mf">0.9510</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9510</span><span class="p">,</span><span class="mf">0.9530</span><span class="p">,</span><span class="mf">0.9480</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9100</span><span class="p">,</span><span class="mf">0.8500</span><span class="p">,</span><span class="mf">0.5400</span><span class="p">,</span><span class="mf">0.8500</span><span class="p">,</span><span class="mf">0.9100</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9480</span><span class="p">,</span><span class="mf">0.9530</span><span class="p">,</span><span class="mf">0.9510</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9470</span><span class="p">,</span><span class="mf">0.9530</span><span class="p">,</span><span class="mf">0.9500</span><span class="p">,</span><span class="mf">0.9410</span><span class="p">,</span><span class="mf">0.9200</span><span class="p">,</span><span class="mf">0.8700</span><span class="p">,</span><span class="mf">0.5800</span><span class="p">,</span><span class="mf">0.8700</span><span class="p">,</span><span class="mf">0.9200</span><span class="p">,</span><span class="mf">0.9410</span><span class="p">,</span><span class="mf">0.9500</span><span class="p">,</span><span class="mf">0.9530</span><span class="p">,</span><span class="mf">0.9470</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9500</span><span class="p">,</span><span class="mf">0.9500</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9250</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.6000</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.9250</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9500</span><span class="p">,</span><span class="mf">0.9500</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.5600</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9460</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">,</span><span class="mf">0.9450</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9200</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.5400</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.9200</span><span class="p">,</span><span class="mf">0.9380</span><span class="p">,</span><span class="mf">0.9430</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">,</span><span class="mf">0.9400</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9390</span><span class="p">,</span><span class="mf">0.9340</span><span class="p">,</span><span class="mf">0.9170</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.5400</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.9170</span><span class="p">,</span><span class="mf">0.9340</span><span class="p">,</span><span class="mf">0.9390</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">,</span><span class="mf">0.9370</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9360</span><span class="p">,</span><span class="mf">0.9320</span><span class="p">,</span><span class="mf">0.9140</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.5600</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.9140</span><span class="p">,</span><span class="mf">0.9320</span><span class="p">,</span><span class="mf">0.9360</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9330</span><span class="p">,</span><span class="mf">0.9200</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.6400</span><span class="p">,</span><span class="mf">0.8820</span><span class="p">,</span><span class="mf">0.9200</span><span class="p">,</span><span class="mf">0.9330</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">,</span><span class="mf">0.9350</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9330</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.8830</span><span class="p">,</span><span class="mf">0.7000</span><span class="p">,</span><span class="mf">0.8830</span><span class="p">,</span><span class="mf">0.9210</span><span class="p">,</span><span class="mf">0.9330</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">,</span><span class="mf">0.9300</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9290</span><span class="p">,</span><span class="mf">0.9190</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.7200</span><span class="p">,</span><span class="mf">0.8800</span><span class="p">,</span><span class="mf">0.9190</span><span class="p">,</span><span class="mf">0.9290</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">,</span><span class="mf">0.9270</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9160</span><span class="p">,</span><span class="mf">0.8700</span><span class="p">,</span><span class="mf">0.7000</span><span class="p">,</span><span class="mf">0.8700</span><span class="p">,</span><span class="mf">0.9160</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">,</span><span class="mf">0.9260</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9100</span><span class="p">,</span><span class="mf">0.8640</span><span class="p">,</span><span class="mf">0.6800</span><span class="p">,</span><span class="mf">0.8640</span><span class="p">,</span><span class="mf">0.9100</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">,</span><span class="mf">0.9230</span><span class="p">;</span><span class="k">...</span>
    <span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9000</span><span class="p">,</span><span class="mf">0.8400</span><span class="p">,</span><span class="mf">0.6400</span><span class="p">,</span><span class="mf">0.8400</span><span class="p">,</span><span class="mf">0.9000</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">,</span><span class="mf">0.9220</span><span class="p">];</span>
<span class="c1">% % Motor Data Files</span>
<span class="n">y1_tmax</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">194</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">161</span><span class="p">,</span><span class="mi">142</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mf">77.5</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mf">63.5</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mf">37.5</span><span class="p">,</span><span class="mf">34.3</span><span class="p">,</span><span class="mf">32.9</span><span class="p">,</span><span class="mf">31.8</span><span class="p">];</span>
<span class="n">y2_tmin</span> <span class="o">=</span> <span class="o">-</span><span class="n">y1_tmax</span><span class="p">;</span>
<span class="c1">% y1_tmax = [319.325555855000,317.805555855000,317.785555855000,317.765555855000,317.745555855000,317.725555855000,317.705555855000,317.685555854000,317.665555855000,317.645555854000,317.625555855000,317.605555855000,317.585555854000,314.146157170000,305.749612370000,295.235193292000,283.964708260000,272.628995200000,261.582240610000,251.000630455000,240.963190182000,231.495095569000,222.591726337000,214.232365136000,206.388124625000,199.026566191000,192.114381515000,185.618922363000,179.509038687000,173.755499909000,168.331165721000,163.211008333000,158.372049125000,153.793248276000,149.455371651000,145.340849212000,141.433634036000,137.719066741000,134.183748191000,130.815421679000,127.602865170000,124.535793041000,121.604767435000,118.801117907000,116.116869515000,113.544677745000,111.077770249000,108.709894454000,106.435270459000,104.248548750000,102.144772023000,100.119341032000,98.1679836001000,96.2867268220000,94.4718718960000,92.7199714130000,91.0278087573000,89.3923794892000,87.8108744493000,86.2806644007000,84.7992861332000,83.3644296708000,81.9739267800000,80.6257403664000,79.3179548964000,78.0487674655000,76.8164798467000,75.6194910662000,74.4562905692000,73.3254520138000,72.2256275114000,71.1555424473000,70.1139905396000,69.0998293681000,68.1119762381000,67.1494043547000];</span>
<span class="c1">% y2_tmin = [-319.325555855000,-320.845555855000,-320.865555855000,-320.885555855000,-320.905555854000,-320.925555855000,-320.945555855000,-320.965555855000,-320.985555854000,-321.005555854000,-321.025555855000,-321.045555854000,-321.048422682000,-316.979715389000,-308.954701496000,-299.070374032000,-288.442909904000,-277.682017996000,-267.121812408000,-256.941075746000,-247.229042852000,-238.022717431000,-229.328626777000,-221.135761453000,-213.423378294000,-206.165740909000,-199.335001370000,-192.902937660000,-186.841979947000,-181.125792224000,-175.729575666000,-170.630198621000,-165.806220007000,-161.237848575000,-156.906865345000,-152.796526733000,-148.891459160000,-145.177552143000,-141.641854047000,-138.272472948000,-135.058483682000,-131.989842014000,-129.057305689000,-126.252362412000,-123.567164260000,-120.994468111000,-118.527581986000,-116.160316127000,-113.886938974000,-111.702137410000,-109.600980719000,-107.578887900000,-105.631598493000,-103.755145587000,-101.945831961000,-100.200207918000,-98.5150516454000,-96.8873510225000,-95.3142872063000,-93.7932197690000,-92.3216730234000,-90.8973236253000,-89.5179892182000,-88.1816181514000,-86.8862798749000,-85.6301564285000,-84.4115342804000,-83.2287971767000,-82.0804194149000,-80.9649596144000,-79.8810550590000,-78.8274165126000,-77.8028233178000,-76.8061189405000,-75.8362069775000,-74.8920471877000];</span>
<span class="c1">% y3_loss = [1.3611	1.1517	0.9423	0.7329	0.5235	0.3141	0.2094	0.1047	0	0.05	0.1	0.15	0.25	0.36	0.47	0.57	0.65</span>
<span class="c1">% 2.04165	1.72755	1.41345	1.09935	0.78525	0.47115	0.3141	0.15705	0	0.15705	0.3141	0.47115	0.78525	1.09935	1.41345	1.72755	2.04165</span>
<span class="c1">% 20.4204	17.2788	14.1372	10.9956	7.854	4.7124	3.1416	1.5708	2.0944	1.5708	3.1416	4.7124	7.854	10.9956	14.1372	17.2788	20.4204</span>
<span class="c1">% 1041.44	881.217	720.996	560.775	400.553	240.332	160.221	80.1107	106.814	80.1107	160.221	240.332	400.553	560.775	720.996	881.217	1041.44</span>
<span class="c1">% 2062.46	1745.16	1427.85	1110.55	793.253	475.952	317.301	158.65	211.534	158.65	317.301	475.952	793.253	1110.55	1427.85	1745.16	2062.46</span>
<span class="c1">% 3083.47	2609.09	2134.71	1660.33	1185.95	711.571	474.38	237.19	316.254	237.19	474.38	711.571	1185.95	1660.33	2134.71	2609.09	3083.47</span>
<span class="c1">% 4104.49	3473.03	2841.57	2210.11	1578.65	947.19	631.46	315.73	420.973	315.73	631.46	947.19	1578.65	2210.11	2841.57	3473.03	4104.49</span>
<span class="c1">% 5125.51	4336.97	3548.43	2759.89	1971.35	1182.81	788.54	394.27	525.693	394.27	788.54	1182.81	1971.35	2759.89	3548.43	4336.97	5125.51</span>
<span class="c1">% 6146.53	5200.91	4255.29	3309.67	2364.05	1418.43	945.62	472.81	630.413	472.81	945.62	1418.43	2364.05	3309.67	4255.29	5200.91	6146.53</span>
<span class="c1">% 7167.54	6064.84	4962.15	3859.45	2756.75	1654.05	1102.7	551.349	735.133	551.349	1102.7	1654.05	2756.75	3859.45	4962.15	6064.84	7167.54</span>
<span class="c1">% 8188.56	6928.78	5669	4409.23	3149.45	1889.67	1259.78	629.889	839.852	629.889	1259.78	1889.67	3149.45	4409.23	5669	6928.78	8188.56</span>
<span class="c1">% 9209.58	7792.72	6375.86	4959	3542.15	2125.29	1416.86	708.429	944.572	708.429	1416.86	2125.29	3542.15	4959	6375.86	7792.72	9209.58</span>
<span class="c1">% 10230.6	8656.66	7082.72	5508.78	3934.84	2360.91	1573.94	786.969	1049.29	786.969	1573.94	2360.91	3934.84	5508.78	7082.72	8656.66	10230.6</span>
<span class="c1">% 11251.6	9520.6	7789.58	6058.56	4327.54	2596.53	1731.02	865.509	1154.01	865.509	1731.02	2596.53	4327.54	6058.56	7789.58	9520.6	11251.6</span>
<span class="c1">% 12272.6	10384.5	8496.44	6608.34	4720.24	2832.15	1888.1	944.049	1258.73	944.049	1888.1	2832.15	4720.24	6608.34	8496.44	10384.5	12272.6</span>
<span class="c1">% 13293.6	11248.5	9203.3	7158.12	5112.94	3067.77	2045.18	1022.59	1363.45	1022.59	2045.18	3067.77	5112.94	7158.12	9203.3	11248.5	13293.6</span>
<span class="c1">% 14334	12130	9924	7718	5514	3308	2206	1102	1470	1102	2206	3308	5514	7718	9924	12130	14334</span>
<span class="c1">% 16376	13858	11338	8818	6298	3780	2520	1260	1680	1260	2520	3780	6298	8818	11338	13858	16376</span>
<span class="c1">% 18420	15586	12752	9918	7084	4250	2834	1416	1888	1416	2834	4250	7084	9918	12752	15586	18420];</span>
<span class="n">x1_w</span> <span class="o">=</span> <span class="mi">0</span><span class="p">:</span><span class="mi">500</span><span class="p">:</span><span class="mi">12000</span><span class="p">;</span>
<span class="n">x2_w</span> <span class="o">=</span> <span class="n">x1_w</span><span class="p">;</span>
<span class="n">x3_w</span> <span class="o">=</span> <span class="n">x1_w</span><span class="p">;</span>
<span class="n">x3_t</span> <span class="o">=</span> <span class="o">-</span><span class="mi">200</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">200</span><span class="p">;</span>
<span class="c1">% y3_loss = (1-motor_eff).*(x3_w'*x3_t)/rps2rpm;</span>
<span class="c1">% Internal Variables</span>
<span class="n">Tmax</span> <span class="o">=</span> <span class="nb">interp1</span><span class="p">(</span><span class="n">x1_w</span><span class="p">,</span> <span class="n">y1_tmax</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Wmotor</span><span class="p">),</span> <span class="s1">'linear'</span><span class="p">,</span> <span class="s1">'extrap'</span><span class="p">);</span>
<span class="n">Tmin</span> <span class="o">=</span> <span class="nb">interp1</span><span class="p">(</span><span class="n">x2_w</span><span class="p">,</span> <span class="n">y2_tmin</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Wmotor</span><span class="p">),</span> <span class="s1">'linear'</span><span class="p">,</span> <span class="s1">'extrap'</span><span class="p">);</span>

<span class="n">Eff</span> <span class="o">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">length</span><span class="p">(</span><span class="n">Wmotor</span><span class="p">))</span><span class="o">*</span><span class="nb">NaN</span><span class="p">;</span>
<span class="c1">% Loss(Wmotor&lt;=7500) = interpextrap2(x3_t,x3_w,y3_loss, Tmotor, Wmotor);</span>
<span class="c1">% Imotor = zeros(1,length(Wmotor))*NaN;</span>
<span class="n">feas</span> <span class="o">=</span> <span class="p">(</span><span class="n">Tmotor</span><span class="o">&lt;=</span><span class="n">Tmax</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">Tmotor</span><span class="o">&gt;=</span><span class="n">Tmin</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">Wmotor</span><span class="p">)</span><span class="o">&lt;=</span><span class="mi">12000</span><span class="p">);</span>
<span class="c1">% Tmotor = Tmotor.*(Tmotor&lt;Tmax&amp;Tmotor&gt;Tmin) + Tmax.*(Tmotor&gt;=Tmax) + Tmin.*(Tmotor&lt;=Tmin);</span>

<span class="n">Eff</span><span class="p">(</span><span class="n">feas</span><span class="p">)</span> <span class="o">=</span> <span class="nb">interp2</span><span class="p">(</span><span class="n">x3_t</span><span class="p">,</span><span class="n">x3_w</span><span class="p">,</span><span class="n">motor_eff</span><span class="p">,</span> <span class="n">Tmotor</span><span class="p">(</span><span class="n">feas</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Wmotor</span><span class="p">(</span><span class="n">feas</span><span class="p">)),</span> <span class="s1">'linear'</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">);</span>

<span class="n">Loss_m</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span><span class="p">/</span><span class="n">Eff</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">.*</span><span class="n">Tmotor</span><span class="o">.*</span><span class="n">Wmotor</span><span class="p">/</span><span class="n">rps2rpm</span><span class="p">;</span>
<span class="n">Loss_g</span> <span class="o">=</span> <span class="p">(</span><span class="n">Eff</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.*</span><span class="n">Tmotor</span><span class="o">.*</span><span class="n">Wmotor</span><span class="p">/</span><span class="n">rps2rpm</span><span class="p">;</span>
<span class="n">Pmot</span> <span class="o">=</span> <span class="n">Tmotor</span><span class="o">.*</span><span class="n">Wmotor</span><span class="p">;</span>

<span class="n">Loss</span> <span class="o">=</span> <span class="n">Loss_m</span><span class="o">.*</span><span class="p">(</span><span class="n">Pmot</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="o">+</span><span class="n">Loss_g</span><span class="o">.*</span><span class="p">(</span><span class="n">Pmot</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">);</span>

<span class="c1">% Imotor(feas) = -(Tmotor(feas).*Wmotor(feas)/rps2rpm+Loss(feas))/Vmotor;</span>
<span class="n">Imotor</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">Tmotor</span><span class="o">.*</span><span class="n">Wmotor</span><span class="p">/</span><span class="n">rps2rpm</span><span class="o">+</span><span class="n">Loss</span><span class="p">)/</span><span class="n">Vmotor</span><span class="p">;</span>
<span class="c1">% % % % if (Tmotor&lt;=Tmax &amp;&amp; Tmotor &gt;=Tmin) &amp;&amp; (Wmotor &lt;=9000)</span>
<span class="c1">% % % %     % Output Calculations</span>
<span class="c1">% % % %     Loss = interpextrap2(x3_t,x3_w,y3_loss, Tmotor, Wmotor);   </span>
<span class="c1">% % % %     Imotor = -(Tmotor*Wmotor/rps2rpm+Loss)/Vmotor;</span>
<span class="c1">% % % % else</span>
<span class="c1">% % % %     Imotor = NaN;</span>
<span class="c1">% % % % end</span>
<span class="k">end</span></code></pre></figure>

<h2 id="battery-code">Battery code</h2>

<p>The following code computes the battery power for the given battery voltage and current.</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="k">function</span> <span class="p">[</span><span class="n">Pbatt</span><span class="p">]</span> <span class="o">=</span> <span class="n">PoP_battery</span><span class="p">(</span><span class="n">Vbatt</span><span class="p">,</span> <span class="n">Ibatt</span><span class="p">)</span>
<span class="c1">% % Battery Parameters</span>
<span class="c1">% Sbank = 6;              % # of banks in series </span>
<span class="c1">% Ncell = 40;             % # of cell in series</span>
<span class="c1">% Pbank = 1;              % # of banks in parallel</span>
<span class="c1">% Rcell = 0.00051;</span>
<span class="c1">% Rint = Rcell*Ncell*Sbank/Pbank;</span>
<span class="n">eta_batt</span> <span class="o">=</span> <span class="mf">0.92</span><span class="p">;</span>
<span class="n">Pbatt</span> <span class="o">=</span> <span class="p">(</span><span class="n">Ibatt</span><span class="o">*</span><span class="n">Vbatt</span><span class="o">.*</span><span class="n">eta_batt</span><span class="o">.^</span><span class="p">(</span><span class="o">-</span><span class="nb">sign</span><span class="p">(</span><span class="n">Ibatt</span><span class="p">)));</span>
<span class="c1">% Pbatt = Vbatt*Ibatt+Ibatt.^2*Rint;</span>
<span class="k">end</span></code></pre></figure>
:ET